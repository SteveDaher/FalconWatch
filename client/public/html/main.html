<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FalconWatch</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.1.2/mapbox-gl.css" rel="stylesheet">
    <link href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.0/mapbox-gl-directions.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/mainStyle.css"> <!-- Updated path to match the directory structure -->

    <!-- Load other libraries and scripts -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.1.2/mapbox-gl.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-language/v1.0.0/mapbox-gl-language.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/map.js"></script>


</head>
<body>
    <div id="header">
        <div id="nav-buttons">
            <div id="user-info" class="user-dropdown">
                <img src="/img/free-user-icon-3296-thumb.png" alt="User Icon" id="user-icon"> <!-- Updated path to match the directory structure -->
                <span id="user-name"></span>
                <div id="user-menu" class="user-menu-dropdown">
                    <a href="#" id="signout-link">Sign Out</a>
                </div>
            </div>
            <a href="/html/main.html" class="active-link">Home</a> <!-- Updated path -->
            <a href="#">Simulations</a>
            <a href="/html/services.html" id="view-services">View Services</a> <!-- Updated path -->
    
            <div class="dropdown">
                <a href="#" id="view-reports" class="dropbtn">View Reports</a>
                <ul class="dropdown-content">
                    <li><a href="/html/chart.html">Crime Severity Statistics</a></li> <!-- Updated paths -->
                    <li><a href="/html/chart2.html">Crime Category Statistics</a></li>
                    <li><a href="/html/chart3.html">Crime Type vs Time of day</a></li>
                    <li><a href="/html/chart4.html">Crime Trends</a></li>
                </ul>
            </div>
    
            <div class="dropdown">
                <a href="#" id="map-styles" class="dropbtn">Map Styles</a>
                <ul class="dropdown-content">
                    <li><a href="#" id="satellite-map">Satellite Map</a></li>
                    <li><a href="#" id="white-map">White Map[EN/AE]</a></li>
                    <li><a href="#" id="dark-map">Dark Map [EN/AE]</a></li>
                    <li><a href="#" id="standard-map">Standard Map</a></li>
                    <li><a href="#" id="arabic-map">Street Map[EN/AE]</a></li>
                </ul>
            </div>
    
            <div class="dropdown">
                <a href="#" id="Language" class="dropbtn">Language/لغة</a>
                <ul class="dropdown-content">
                    <li><a href="#" id="EnglishLanguage">English</a></li>
                    <li><a href="#" id="ArabicLanguage">عربي</a></li>
                </ul>
            </div>
            <a href="/html/report.html" id="toggle-reporting">Report a Crime</a> <!-- Updated path -->
        </div>
        <img src="/img/logoFW.png" alt="Logo" id="logo"> <!-- Updated path to match the directory structure -->
    </div>
    

    <div id="map"></div>

    <div id="timeline-container">
        <div id="timeline-header">
            <h2>Timeline</h2>
            <div id="filter-container">
                <label for="severity-filter">Filter by Severity:</label>
                <select id="severity-filter">
                    <option value="all">All</option>
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                </select>
            </div>
        </div>
        <div id="timeline">
            <div id="timeline-line"></div>
        </div>
    </div>

    <div id="toggle-timeline-tab">
        <span id="toggle-arrow">&#9650;</span>
    </div>

    <!-- Success Modal HTML -->
    <div id="success-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p id="modal-message">Report submitted successfully!</p>
            <p id="modal-timestamp">Date: <span id="timestamp"></span></p>
        </div>
    </div>

    <!-- Picture Modal HTML -->
    <div id="picture-modal" class="modal picture-modal">
        <div class="modal-content picture-modal-content">
            <span class="close">&times;</span>
            <img src="" alt="Crime Picture" id="picture-img">
        </div>
    </div>

    <!-- New Crime Details Popup -->
    <div id="new-crime-details-popup" class="new-modal" onclick="closeNewCrimeDetailsPopup(event)">
        <div class="new-modal-content" onclick="event.stopPropagation()">
            <div id="severity-line"></div>
            <span class="new-close" onclick="closeNewCrimeDetailsPopup()">&times;</span>
            <div id="new-crime-details-content"></div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOMContentLoaded event fired.');
    
            const token = localStorage.getItem('authToken');
            if (!token) {
                window.location.href = '/html/login.html';
                return;
            }
    
            console.log('Auth Token:', token);
        });
    </script>
    
</body>
</html>
